function Flickr(){function a(a,b,c){var e=d.replace("{latitude}",a).replace("{longitude}",b);$.getJSON(e,c).fail(function(){alert("ERROR: Failed to search Flickr for related photos"),console.log("ERROR: Flickr photos.search failed")})}function b(a,b){var c=e.replace("{photo_id}",a);$.getJSON(c,b).fail(function(){alert("ERROR: Failed to obtain info for Flickr photo (id: "+a+")"),console.log("ERROR: Flickr photos.getInfo failed")})}function c(a,b){var c=f.replace("{farm_id}",a.farm).replace("{server_id}",a.server).replace("{photo_id}",a.id).replace("{secret}",a.secret),d={imgThumbUrl:c.replace("{size}","s"),imgMediumUrl:c.replace("{size}","z")};return d}var d="https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=30543d5bbfa8313186b84d5aadecc141&lat={latitude}&lon={longitude}&radius=1&per_page=8&format=json&nojsoncallback=1",e="https://api.flickr.com/services/rest/?method=flickr.photos.getInfo&api_key=30543d5bbfa8313186b84d5aadecc141&photo_id={photo_id}&format=json&nojsoncallback=1",f="https://farm{farm_id}.staticflickr.com/{server_id}/{photo_id}_{secret}_{size}.jpg";this.getPhotos=function(d,e,f){a(d,e,function(a){for(var d,e=a.photos.photo,g=[],h=0;h<e.length;h++){d=c(e[h]),g.push(d);var i=0;b(e[h].id,function(a){return function(b){a.photoPage=b.photo.urls.url[0]._content,a.title=b.photo.title._content,i++,i===e.length&&f(g)}}(d))}})}}var flickr=new Flickr;